#include "Octahedral.glsl"

uniform samplerCube PositionCubemap;
uniform sampler2D RadianceMapFromLight;

out vec3 Result;

void main()
{
	vec3 Direction = octDecode(gl_FragCoord.xy * 2.0 / 1024  - 1.0);

	vec3 Position = texture(PositionCubemap, Direction).xyz;

	vec3 SampleDirection = normalize(Position-vec3(0, 1, 0));

	vec2 TexCoord = octEncode(SampleDirection);
	vec2 UnpackTexCoord = TexCoord * 0.5 + 0.5;
	Result = Position;//texture(RadianceMapFromLight, UnpackTexCoord).xyz;
}